<!DOCTYPE html>
<script src="https://rawgit.com/sitepoint-editors/jsqrcode/master/src/qr_packed.js"></script>
<html>
  <body>
    <canvas id="qr"></canvas>
    <form id="form2" autocomplete="off">
        <div class="formitem">
            <label type="text" class="formlabel"> Upload QR Code </label>
            <input type="text" class="forminput" id="prodid" onkeypress="isInputNumber(event)" required>
            <label class=qrcode-text-btn style="width:4%;">
                <input type=file accept="image/*" id="selectedFile" capture=environment onchange="openQRCamera(this);" tabindex=-1>
            </label>
            <button class="qrbutton2" onclick="document.getElementById('selectedFile').click();" style="margin-bottom: 5px;margin-top: 5px;">
            <i class='fa fa-qrcode'></i> Scan QR
            </button>
        </div>
    </form>

    <script src="node_modules\qrious\dist\qrious.js"></script>
    <script>
      (function() {
        var qr = new QRious({
          element: document.getElementById('qr'),
          value: 'abcd123'
        });
        //alert(qrcode.decode('images/download.png'));
      })();
    </script>
    <script>
        function openQRCamera(node) {
		var reader = new FileReader();
		reader.onload = function() {
			node.value = "";
			qrcode.callback = function(res) {
			if(res instanceof Error) {
				alert("No QR code found. Please make sure the QR code is within the camera's frame and try again.");
			} else {
				node.parentNode.previousElementSibling.value = res;
				document.getElementById('searchButton').click();
			}
			};
			qrcode.decode(reader.result);
		};
		reader.readAsDataURL(node.files[0]);
	}
    </script>
  </body>
</html>